# Daily Timesheet Report - BÃ¡o CÃ¡o Cháº¥m CÃ´ng HÃ ng NgÃ y

## Tá»•ng Quan
BÃ¡o cÃ¡o Daily Timesheet Report Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘á»ƒ theo dÃµi vÃ  xuáº¥t bÃ¡o cÃ¡o cháº¥m cÃ´ng chi tiáº¿t cá»§a nhÃ¢n viÃªn theo tá»«ng ngÃ y, phá»¥c vá»¥ viá»‡c tÃ­nh toÃ¡n lÆ°Æ¡ng vÃ  quáº£n lÃ½ nhÃ¢n sá»±.

## Äáº·c Äiá»ƒm ChÃ­nh

### ğŸ” Hiá»ƒn Thá»‹ Dá»¯ Liá»‡u
- **LuÃ´n hiá»ƒn thá»‹ táº¥t cáº£ nhÃ¢n viÃªn** Ä‘ang lÃ m viá»‡c trong khoáº£ng thá»i gian Ä‘Æ°á»£c chá»n
- **NhÃ¢n viÃªn cÃ³ dá»¯ liá»‡u cháº¥m cÃ´ng**: Hiá»ƒn thá»‹ Ä‘áº§y Ä‘á»§ thÃ´ng tin working hours, overtime, check in/out
- **NhÃ¢n viÃªn khÃ´ng cÃ³ dá»¯ liá»‡u cháº¥m cÃ´ng**: Hiá»ƒn thá»‹ thÃ´ng tin cÃ¡ nhÃ¢n, cÃ¡c cá»™t thá»i gian Ä‘á»ƒ trá»‘ng hoáº·c = 0

### ğŸ“Š Cháº¿ Äá»™ Hiá»ƒn Thá»‹
1. **Detail Mode (Summary = 0)**: Hiá»ƒn thá»‹ tá»«ng record hÃ ng ngÃ y cá»§a má»—i nhÃ¢n viÃªn
2. **Summary Mode (Summary = 1)**: Tá»•ng há»£p dá»¯ liá»‡u theo nhÃ¢n viÃªn trong khoáº£ng thá»i gian

## Bá»™ Lá»c (Filters)

### ğŸ“… Thá»i Gian
- **Date Type**: Chá»n loáº¡i khoáº£ng thá»i gian
  - *Single Date*: Chá»n má»™t ngÃ y cá»¥ thá»ƒ
  - *Date Range*: Chá»n khoáº£ng tá»« ngÃ y - Ä‘áº¿n ngÃ y  
  - *Monthly*: Chá»n thÃ¡ng vÃ  nÄƒm (tá»« ngÃ y 26 thÃ¡ng trÆ°á»›c Ä‘áº¿n ngÃ y 25 thÃ¡ng hiá»‡n táº¡i)

### ğŸ‘¥ NhÃ¢n ViÃªn
- **Department**: Lá»c theo phÃ²ng ban
- **Section**: Lá»c theo bá»™ pháº­n
- **Group**: Lá»c theo nhÃ³m
- **Employee**: Lá»c theo nhÃ¢n viÃªn cá»¥ thá»ƒ
- **Status**: Lá»c theo tráº¡ng thÃ¡i (Present, Absent, Half Day, v.v.)

### âš™ï¸ TÃ¹y Chá»n Hiá»ƒn Thá»‹
- **Summary**: Tá»•ng há»£p dá»¯ liá»‡u theo nhÃ¢n viÃªn (máº·c Ä‘á»‹nh: Detail)
- **Detail Columns**: Hiá»ƒn thá»‹ cÃ¡c cá»™t chi tiáº¿t bá»• sung
- **Chart Type**: Chá»n loáº¡i biá»ƒu Ä‘á»“ (Department Summary, Top 50 Overtime, Top 50 Working Hours)

## Cá»™t Dá»¯ Liá»‡u

### ğŸ“‹ ThÃ´ng Tin CÆ¡ Báº£n
- **Employee**: MÃ£ nhÃ¢n viÃªn
- **Employee Name**: TÃªn nhÃ¢n viÃªn  
- **Group**: NhÃ³m/Chuyá»n
- **Attendance Date**: NgÃ y cháº¥m cÃ´ng (chá»‰ á»Ÿ Detail Mode)
- **Shift**: Ca lÃ m viá»‡c

### â° Thá»i Gian LÃ m Viá»‡c
- **Check In/Check Out**: Giá» vÃ o/ra (Detail Mode)
- **Working Hours**: Sá»‘ giá» lÃ m viá»‡c
- **Working Days**: Sá»‘ ngÃ y cÃ´ng (= Working Hours / 8)

### ğŸ• Overtime
- **Actual OT**: Overtime thá»±c táº¿
- **Registered OT**: Overtime Ä‘Ã£ Ä‘Äƒng kÃ½
- **Final OT**: Overtime cuá»‘i cÃ¹ng Ä‘Æ°á»£c tÃ­nh
- **Overtime Coefficient**: Há»‡ sá»‘ overtime (Detail Columns)
- **Final OT - With Coefficient**: Overtime tÃ­nh theo há»‡ sá»‘ (Detail Columns)

### ğŸ“ Chi Tiáº¿t Bá»• Sung (Detail Columns = 1)
- **Department**: PhÃ²ng ban
- **Section**: Bá»™ pháº­n
- **Late Entry**: Äi trá»…
- **Early Exit**: Vá» sá»›m
- **Maternity Benefit**: Thai sáº£n
- **Date of Joining**: NgÃ y vÃ o lÃ m
- **Relieving Date**: NgÃ y nghá»‰ viá»‡c
- **Status**: Tráº¡ng thÃ¡i cháº¥m cÃ´ng

## ğŸ“ˆ Biá»ƒu Äá»“

### 1. Department Summary
- Hiá»ƒn thá»‹ tá»•ng Working Hours vÃ  Overtime Hours theo tá»«ng phÃ²ng ban
- Biá»ƒu Ä‘á»“ cá»™t dá»c, chiá»u cao 150px

### 2. Top 50 - Highest Overtime  
- Top 50 nhÃ¢n viÃªn cÃ³ Overtime cao nháº¥t
- Biá»ƒu Ä‘á»“ cá»™t ngang, chiá»u cao 150px

### 3. Top 50 - Highest Working Hours
- Top 50 nhÃ¢n viÃªn cÃ³ Working Hours cao nháº¥t  
- Biá»ƒu Ä‘á»“ cá»™t ngang, chiá»u cao 150px

## ğŸ“¤ Export Excel

### âœ¨ TÃ­nh NÄƒng
- **Button**: "Export Excel - HR Template"
- **LuÃ´n xuáº¥t dá»¯ liá»‡u chi tiáº¿t** (tá»± Ä‘á»™ng set Summary = 0)
- **Template chuáº©n HR** vá»›i format báº£ng cháº¥m cÃ´ng

### ğŸ“Š Ná»™i Dung Excel
- **Header**: TiÃªu Ä‘á» song ngá»¯ (Tiáº¿ng Anh/Tiáº¿ng Viá»‡t)
- **Employee Data**: ThÃ´ng tin nhÃ¢n viÃªn theo department
- **Daily Data**: Working days cho tá»«ng ngÃ y trong period
- **Total Row**: Tá»•ng cá»™ng working days
- **Signatures**: Chá»¯ kÃ½ Prepared by, Verified by, Approved by
- **Legend**: ChÃº thÃ­ch cÃ¡c kÃ½ hiá»‡u cháº¥m cÃ´ng

### ğŸ“… Format NgÃ y
- **Monthly**: "Jan 2025/ ThÃ¡ng 01 nÄƒm 2025"
- **Date Range**: "01-01-2025 - 31-01-2025"
- **Single Date**: "01-01-2025"

## ğŸ”§ Logic Ká»¹ Thuáº­t

### ğŸ’¾ Nguá»“n Dá»¯ Liá»‡u
- **ChÃ­nh**: `tabDaily Timesheet` (báº£ng cháº¥m cÃ´ng chi tiáº¿t)
- **Phá»¥ trá»£**: `tabEmployee` (thÃ´ng tin nhÃ¢n viÃªn)

### ğŸ”„ Xá»­ LÃ½ Dá»¯ Liá»‡u
1. **LEFT JOIN** tá»« Employee sang Daily Timesheet
2. **LuÃ´n hiá»ƒn thá»‹ táº¥t cáº£ active employees** trong period
3. **Missing data** = 0 hoáº·c NULL cho cÃ¡c cá»™t thá»i gian
4. **Decimal rounding** vá»›i Ä‘á»™ chÃ­nh xÃ¡c 2 chá»¯ sá»‘ tháº­p phÃ¢n

### ğŸ“‹ Äiá»u Kiá»‡n Lá»c
- **Active Period**: `(date_of_joining <= period_end) AND (relieving_date >= period_start)`
- **Exclude Departments**: 'Head of Branch - TIQN', 'Operations Manager - TIQN'
- **Docstatus**: `<= 1` (Draft vÃ  Submitted)

## ğŸ“ LÆ°u Ã Sá»­ Dá»¥ng

### âœ… Æ¯u Äiá»ƒm
- **Hiá»ƒn thá»‹ Ä‘áº§y Ä‘á»§**: KhÃ´ng bá» sÃ³t nhÃ¢n viÃªn nÃ o trong period
- **Linh hoáº¡t**: Nhiá»u tÃ¹y chá»n lá»c vÃ  hiá»ƒn thá»‹  
- **Export chuáº©n**: Template Excel phÃ¹ há»£p vá»›i quy trÃ¬nh HR
- **Performance tá»‘t**: Query tá»‘i Æ°u vá»›i LEFT JOIN

### âš ï¸ LÆ°u Ã
- **Monthly period**: Tá»« 26 thÃ¡ng trÆ°á»›c Ä‘áº¿n 25 thÃ¡ng hiá»‡n táº¡i
- **Working Day**: TÃ­nh báº±ng Working Hours / 8
- **Export luÃ´n Detail**: KhÃ´ng phá»¥ thuá»™c vÃ o Summary checkbox trÃªn UI
- **Cache**: Cáº§n clear browser cache sau khi update code

## ğŸ”„ Version History
- **v2.0**: Loáº¡i bá» show_zero filter, luÃ´n hiá»ƒn thá»‹ táº¥t cáº£ active employees
- **v1.9**: Force Summary = 0 trong Excel export
- **v1.8**: Giáº£m chart height tá»« 300px xuá»‘ng 150px
- **v1.7**: TÃ­ch há»£p export Excel vá»›i template HR chuáº©n