[
  {
    "absolute_value": 0,
    "align_labels_right": 0,
    "css": "body {\r\n  font-family: \"Times New Roman\", serif;\r\n  font-size: 11px;\r\n  line-height: 1.2;\r\n  margin: 3px;\r\n  padding: 5px;\r\n  position: relative;\r\n  counter-reset: page;\r\n}\r\n.header {\r\n  margin-bottom: 10px;\r\n}\r\n.company-info {\r\n  float: left;\r\n  width: 75%;\r\n  font-size: 10px;\r\n  line-height: 1.2;\r\n}\r\n.company-info .vietnamese {\r\n  font-style: italic;\r\n  font-weight: normal;\r\n}\r\n.document-info {\r\n  float: right;\r\n  width: 20%;\r\n  text-align: center;\r\n  font-size: 9px;\r\n  padding: 5px;\r\n}\r\n.document-number {\r\n  font-weight: bold;\r\n  margin-bottom: 5px;\r\n  font-size: 11px;\r\n}\r\n.barcode {\r\n  margin-top: 5px;\r\n}\r\n.qr-content {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n.title-section {\r\n  text-align: center;\r\n  margin-bottom: 10px;\r\n  clear: both;\r\n  padding-top: 10px;\r\n}\r\n.main-title {\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n  margin-bottom: 3px;\r\n}\r\n.sub-title {\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  color: #666;\r\n  font-style: italic;\r\n}\r\n.form-info {\r\n  margin-bottom: 10px;\r\n  clear: both;\r\n}\r\n.info-row {\r\n  margin-bottom: 4px;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.info-label {\r\n  font-weight: bold;\r\n  min-width: 200px;\r\n}\r\n.info-label .vietnamese {\r\n  font-style: italic;\r\n  font-weight: normal;\r\n}\r\n.info-value {\r\n  flex: 1;\r\n  border-bottom: 1px solid #ccc;\r\n  padding-bottom: 1px;\r\n  min-height: 14px;\r\n}\r\n.info-value .vietnamese {\r\n  font-style: italic;\r\n  font-weight: normal;\r\n}\r\n.table-container {\r\n  margin: 10px 0;\r\n}\r\n.data-table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  border: 1px solid #000;\r\n  font-size: 11px;\r\n}\r\n.data-table th {\r\n  background-color: #f5f5f5;\r\n  border: 1px solid #000;\r\n  padding: 1px;\r\n  text-align: center;\r\n  font-weight: bold;\r\n  vertical-align: middle;\r\n  font-size: 10px;\r\n}\r\n.data-table th .vietnamese {\r\n  font-style: italic;\r\n  font-weight: normal;\r\n}\r\n.data-table td {\r\n  border: 1px solid #000;\r\n  padding: 1px;\r\n  text-align: center;\r\n  vertical-align: middle;\r\n}\r\n.data-table td.text-left {\r\n  text-align: left;\r\n}\r\n.totals-section {\r\n  margin: 10px 0;\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n.totals-item {\r\n  flex: 1;\r\n  text-align: left;\r\n}\r\n.totals-text {\r\n  font-weight: bold;\r\n  font-size: 11px;\r\n}\r\n.totals-text .vietnamese {\r\n  font-style: italic;\r\n  font-weight: normal;\r\n}\r\n.footer {\r\n  margin-top: 10px;\r\n  page-break-inside: avoid;\r\n}\r\n.explanation-section {\r\n  margin-bottom: 10px;\r\n}\r\n.explanation-label {\r\n  font-weight: bold;\r\n  margin-bottom: 5px;\r\n  font-size: 11px;\r\n}\r\n.explanation-label .vietnamese {\r\n  font-style: italic;\r\n  font-weight: normal;\r\n}\r\n.explanation-lines {\r\n  height: 40px;\r\n  padding: 5px;\r\n}\r\n.explanation-line {\r\n  border-bottom: 1px solid #ccc;\r\n  margin-bottom: 8px;\r\n  height: 15px;\r\n}\r\n.signature-section {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  text-align: center;\r\n}\r\n.signature-box {\r\n  width: 30%;\r\n  padding: 5px;\r\n  height: 80px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-between;\r\n}\r\n.signature-title {\r\n  font-weight: bold;\r\n  margin-bottom: 3px;\r\n  font-size: 11px;\r\n}\r\n.signature-title-vn {\r\n  font-style: italic;\r\n  color: #666;\r\n  font-size: 9px;\r\n  margin-bottom: 15px;\r\n}\r\n.signature-space {\r\n  flex: 1;\r\n  margin: 5px 0;\r\n}\r\n.signature-role {\r\n  font-weight: bold;\r\n  margin-top: 15px;\r\n  font-size: 11px;\r\n}\r\n.signature-role-vn {\r\n  font-style: italic;\r\n  color: #666;\r\n  font-size: 9px;\r\n}\r\n.signature-name {\r\n  font-weight: bold;\r\n  margin: 5px 0;\r\n  font-size: 11px;\r\n  text-align: center;\r\n}\r\n.approval-text {\r\n  font-size: 8px;\r\n  font-style: italic;\r\n  color: #666;\r\n  text-align: center;\r\n  line-height: 1.1;\r\n  margin: 2px 0;\r\n}\r\n.page-number {\r\n  position: fixed;\r\n  bottom: 15px;\r\n  right: 15px;\r\n  font-style: italic;\r\n  color: #666;\r\n  font-size: 9px;\r\n}\r\n@page {\r\n  /*top right bottom left;*/\r\n  margin: 0.4cm 0.4cm 0.4cm 0.6cm;\r\n  @bottom-right {\r\n    content: \"Page \" counter(page) \" of \" counter(pages);\r\n    font-family: \"Times New Roman\", serif;\r\n    font-style: italic;\r\n    color: #666;\r\n    font-size: 9px;\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n.clearfix::after {\r\n  content: \"\";\r\n  display: table;\r\n  clear: both;\r\n}\r\n@media print {\r\n  body {\r\n    margin: 0;\r\n    padding-left: 15px;\r\n    padding-right: 5px;\r\n    padding-top: 5px;\r\n    padding-bottom: 5px;\r\n  }\r\n.page-break { page-break-before: always; }\r\n  .page-number {\r\n    display: none; /* Hide for print, use @page @bottom-right instead */\r\n  }\r\n}",
    "custom_format": 1,
    "default_print_language": "en",
    "disabled": 0,
    "doc_type": "Overtime Registration",
    "docstatus": 0,
    "doctype": "Print Format",
    "font": null,
    "font_size": 14,
    "format_data": null,
    "html": "<!DOCTYPE html>\r\n<html>\r\n\r\n<head>\r\n  <meta charset=\"utf-8\">\r\n</head>\r\n\r\n<body>\r\n  <!-- Header Section -->\r\n  <div class=\"header clearfix\">\r\n    <div class=\"company-info\">\r\n      <strong>TORAY INTERNATIONAL VIETNAM COMPANY LIMITED - QUANG NGAI BRANCH</strong><br>\r\n      <strong><span class=\"vietnamese\">CÔNG TY TNHH TORAY INTERNATIONAL VIỆT NAM CN QUẢNG NGÃI</span></strong><br><br>\r\n      No. 09, Tu Do Boulevard, VSIP / <span class=\"vietnamese\">Số 09, Đại Lộ Tự Do, KCN Việt Nam - Singapore</span><br>\r\n      Tho Phong Commune / <span class=\"vietnamese\">Xã Thọ Phong</span><br>\r\n      Quang Ngai Province, Vietnam / <span class=\"vietnamese\">Tỉnh Quảng Ngãi, Việt Nam</span>\r\n    </div>\r\n    <div class=\"document-info\">\r\n      <div class=\"document-number\">\r\n        No: {{ doc.name }}\r\n      </div>\r\n      <div class=\"barcode\">\r\n        <!-- QR Code with local generation -->\r\n        <div class=\"qr-content\">\r\n          {% set qr_data = frappe.utils.get_url() + \"/app/overtime-registration/\" + doc.name %}\r\n          {% set qr_code_base64 = frappe.call(\"customize_erpnext.api.qr_label_print.generate_qr_code_base64\",\r\n          data=qr_data) %}\r\n          {% if qr_code_base64 %}\r\n          <img src=\"data:image/png;base64,{{ qr_code_base64 }}\" alt=\"QR Code\"\r\n            style=\"width: 70px; height: 70px; border: none;\">\r\n          {% else %}\r\n          <div\r\n            style=\"width: 70px; height: 70px; border: 1px solid #ccc; display: flex; align-items: center; justify-content: center; font-size: 8px; text-align: center;\">\r\n            {{ doc.name }}\r\n          </div>\r\n          {% endif %}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"title-section\">\r\n    <div class=\"main-title\">OVERTIME/HOLIDAY WORK APPLICATION FORM</div>\r\n    <div class=\"sub-title\">BẢN ĐĂNG KÝ LÀM THÊM GIỜ</div>\r\n  </div>\r\n  <!-- Form Information -->\r\n  <div class=\"form-info\">\r\n    <div class=\"info-row\">\r\n      <span class=\"info-label\">Date/ <span class=\"vietnamese\">Ngày yêu cầu</span>:</span>\r\n      <span class=\"info-value\">\r\n        {% if doc.request_date %}\r\n        {{ frappe.utils.formatdate(doc.request_date, \"dd/MM/yyyy\") }}\r\n        {% endif %}\r\n        <!--&nbsp;&nbsp;&nbsp;&nbsp;(It must be approved by 15:00 / Phải được phê duyệt trước 15 giờ)-->\r\n      </span>\r\n    </div>\r\n    <div class=\"info-row\">\r\n      <span class=\"info-label\">OT Location/<br><span class=\"vietnamese\">Địa điểm làm thêm</span>:</span>\r\n      <span class=\"info-value\">\r\n        Toray International Vietnam Company Limited - Quang Ngai Branch<br>\r\n        <span class=\"vietnamese\">Công Ty TNHH Toray International Việt Nam - CN Quảng Ngãi</span>\r\n      </span>\r\n    </div>\r\n    <div class=\"info-row\">\r\n      <span class=\"info-label\">Group / <span class=\"vietnamese\">Nhóm</span>:</span>\r\n      <span class=\"info-value\">\r\n        {% set groups = [] %}\r\n        {% for row in doc.ot_employees %}\r\n        {% if row.group and row.group not in groups %}\r\n        {% set _ = groups.append(row.group) %}\r\n        {% endif %}\r\n        {% endfor %}\r\n        {{ groups | join(\", \") }}\r\n      </span>\r\n    </div>\r\n    <div class=\"info-row\">\r\n      <span class=\"info-label\">Reason / <span class=\"vietnamese\">Lý do</span>:</span>\r\n      <span class=\"info-value\">{{ doc.reason_general or \"\" }}</span>\r\n    </div>\r\n    <div class=\"info-row\">\r\n      <span class=\"info-label\">Requested By/ <span class=\"vietnamese\">Người yêu cầu</span>:</span>\r\n      <span class=\"info-value\">{{ doc.requested_by_full_name or \"\" }}</span>\r\n    </div>\r\n    <div class=\"info-row\">\r\n      <span class=\"info-label\">Approver/ <span class=\"vietnamese\">Người phê duyệt</span>:</span>\r\n      <span class=\"info-value\">\r\n        {{ doc.approver_full_name or \"\" }}\r\n        {% if doc.workflow_state == \"Approved\" and doc.approver_full_name %}\r\n        - Approved on system/ <span class=\"vietnamese\">Đã duyệt trên hệ thống</span>\r\n        {% endif %}\r\n      </span>\r\n    </div>\r\n    {% if doc.remarks %}\r\n    <div class=\"info-row\">\r\n      <span class=\"info-label\">Remarks/ <span class=\"vietnamese\">Ghi chú</span>:</span>\r\n      <span class=\"info-value\">{{ doc.remarks }}</span>\r\n    </div>\r\n    {% endif %}\r\n  </div>\r\n  <!-- Data Table -->\r\n  <div class=\"table-container\">\r\n    <table class=\"data-table\">\r\n      <thead>\r\n        <tr>\r\n          <th style=\"width: 2%;\">No<br><span class=\"vietnamese\">STT</span></th>\r\n          <th style=\"width: 11%;\">Employee Code<br><span class=\"vietnamese\">MSNV</span></th>\r\n          <th style=\"width: 16%;\">Full Name<br><span class=\"vietnamese\">Họ tên</span></th>\r\n          <th style=\"width: 8%;\">Group<br><span class=\"vietnamese\">Nhóm</span></th>\r\n          <th style=\"width: 18%;\">Date<br><span class=\"vietnamese\">Ngày</span></th>\r\n          <th style=\"width: 9%;\">Begin Time<br><span class=\"vietnamese\">Giờ bắt đầu</span></th>\r\n          <th style=\"width: 9%;\">End Time<br><span class=\"vietnamese\">Giờ kết thúc</span></th>\r\n          <th style=\"width: 19%;\">Reason<br><span class=\"vietnamese\">Lý do</span></th>\r\n          <th style=\"width: 8%;\">Signature<br><span class=\"vietnamese\">Chữ ký</span></th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {% set employee_data = {} %}\r\n        <!-- Group data by employee -->\r\n        {% for row in doc.ot_employees %}\r\n        {% if row.employee not in employee_data %}\r\n        {% set _ = employee_data.update({\r\n        row.employee: {\r\n        'employee_name': row.employee_name,\r\n        'group': row.group,\r\n        'dates': [],\r\n        'times': [],\r\n        'reasons': []\r\n        }\r\n        }) %}\r\n        {% endif %}\r\n        {% if row.date %}\r\n        {% set _ = employee_data[row.employee]['dates'].append(frappe.utils.formatdate(row.date, \"dd/MM/yy\")) %}\r\n        {% endif %}\r\n        {% if row.begin_time and row.end_time %}\r\n        {% set begin_time_formatted = (row.begin_time|string)[:5] if row.begin_time else \"\" %}\r\n        {% set end_time_formatted = (row.end_time|string)[:5] if row.end_time else \"\" %}\r\n        {% set time_range = begin_time_formatted + \" - \" + end_time_formatted %}\r\n        {% set _ = employee_data[row.employee]['times'].append(time_range) %}\r\n        {% endif %}\r\n        {% if row.reason %}\r\n        {% set _ = employee_data[row.employee]['reasons'].append(row.reason) %}\r\n        {% endif %}\r\n        {% endfor %}\r\n        <!-- Display grouped data -->\r\n        {% set counter = [0] %}\r\n        {% for employee_id, data in employee_data.items() %}\r\n        {% set _ = counter.append(counter.pop() + 1) %}\r\n        <tr>\r\n          <td>{{ counter[0] }}</td>\r\n          <td>{{ employee_id }}</td>\r\n          <td class=\"text-left\">{{ data.employee_name or \"\" }}</td>\r\n          <td>{{ data.group or \"\" }}</td>\r\n          <td class=\"text-left\">\r\n            {% for date in data.dates | unique %}\r\n            {{ date }}{% if not loop.last %}&nbsp;&nbsp;{% endif %}\r\n            {% endfor %}\r\n          </td>\r\n          <td>\r\n            {% for time in data.times | unique %}\r\n            {{ time.split(' - ')[0] }}{% if not loop.last %}<br>{% endif %}\r\n            {% endfor %}\r\n          </td>\r\n          <td>\r\n            {% for time in data.times | unique %}\r\n            {{ time.split(' - ')[1] }}{% if not loop.last %}<br>{% endif %}\r\n            {% endfor %}\r\n          </td>\r\n          <td class=\"text-left\">\r\n            {% for reason in data.reasons | unique %}\r\n            {{ reason }}{% if not loop.last %}<br>{% endif %}\r\n            {% endfor %}\r\n          </td>\r\n          <td style=\"height: 20px;\"></td>\r\n        </tr>\r\n        {% endfor %}\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n  <!-- Totals Section -->\r\n  <div class=\"totals-section\">\r\n    <div class=\"totals-item\">\r\n      <div class=\"totals-text\">Total Employees / <span class=\"vietnamese\">Tổng số NV</span>: {{ doc.total_employees or 0\r\n        }}</div>\r\n    </div>\r\n    <div class=\"totals-item\">\r\n      <div class=\"totals-text\">Total Hours / <span class=\"vietnamese\">Tổng số giờ</span>: {{\r\n        \"%.1f\"|format(doc.total_hours or 0) }}</div>\r\n    </div>\r\n  </div>\r\n  <!-- Footer Section -->\r\n  <div class=\"footer\">\r\n    <div class=\"explanation-section\">\r\n      <div class=\"explanation-label\">\r\n        Other justifications/explanation (<span class=\"vietnamese\">Giải trình khác</span>):\r\n      </div>\r\n      <div class=\"explanation-lines\">\r\n        <div class=\"explanation-line\"></div>\r\n        <div class=\"explanation-line\"></div>\r\n      </div>\r\n    </div>\r\n    <div class=\"signature-section\">\r\n      <div class=\"signature-box\">\r\n        <div>\r\n          <div class=\"signature-title\">Prepared by:</div>\r\n          <div class=\"signature-title-vn\">Chuẩn bị bởi</div>\r\n        </div>\r\n        <div class=\"signature-space\"></div>\r\n        <div class=\"signature-space\"></div>\r\n        <div class=\"signature-space\"></div>\r\n        <div>\r\n          <div class=\"signature-name\">{{ doc.requested_by_full_name or \"\" }}</div>\r\n        </div>\r\n      </div>\r\n      <div class=\"signature-box\">\r\n        <div>\r\n          <div class=\"signature-title\">Approved by:</div>\r\n          <div class=\"signature-title-vn\">Phê duyệt bởi</div>\r\n        </div>\r\n        <div class=\"signature-space\"></div>\r\n        {% set has_active_workflow = frappe.db.exists(\"Workflow\", {\"document_type\": doc.doctype, \"is_active\": 1}) %}\r\n{% if has_active_workflow and doc.workflow_state == \"Approved\" %}\r\n  <!-- Hiển thị text \"Approved on system\" -->\r\n \r\n        {% else %}\r\n        <div class=\"signature-space\"></div>\r\n        {% endif %}\r\n        <div>\r\n          <div class=\"signature-role\">Department Manager</div>\r\n          <div class=\"signature-role-vn\">Trưởng Bộ Phận</div>\r\n          <div class=\"signature-name\">{{ doc.approver_full_name or \"\" }}</div>\r\n        </div>\r\n      </div>\r\n      <div class=\"signature-box\">\r\n        <div>\r\n          <div class=\"signature-title\">Approved by:</div>\r\n          <div class=\"signature-title-vn\">Phê duyệt bởi</div>\r\n        </div>\r\n        <div class=\"signature-space\"></div>\r\n        <div class=\"signature-space\"></div> \r\n        <div>\r\n          <div class=\"signature-role\">Factory Manager</div>\r\n          <div class=\"signature-role-vn\">Giám đốc Nhà máy</div>\r\n          <div class=\"signature-name\">Kitajima Motoharu</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <!-- Page Number -->\r\n  <div class=\"page-number\" id=\"pageNumber\">\r\n    {{ doc.name }} - Page 1 of 1\r\n  </div>\r\n\r\n  <script>\r\n    // Add document name to print footer\r\n    document.addEventListener('DOMContentLoaded', function () {\r\n      const docName = '{{ doc.name }}';\r\n\r\n      // Create a style element for print\r\n      const printStyle = document.createElement('style');\r\n      printStyle.textContent = `\r\n        @media print {\r\n          @page {\r\n            margin: 0.4cm 0.4cm 0.4cm 0.6cm;\r\n            @bottom-right {\r\n              content: \"${docName} - Page \" counter(page) \" of \" counter(pages);\r\n              font-family: \"Times New Roman\", serif;\r\n              font-style: italic;\r\n              color: #666;\r\n              font-size: 9px;\r\n              margin-bottom: 10px;\r\n            }\r\n          }\r\n        }\r\n      `;\r\n      document.head.appendChild(printStyle);\r\n    });\r\n  </script>\r\n</body>\r\n\r\n</html>",
    "line_breaks": 0,
    "margin_bottom": 15.0,
    "margin_left": 15.0,
    "margin_right": 15.0,
    "margin_top": 15.0,
    "modified": "2025-10-13 15:29:15.495228",
    "module": "Customize Erpnext",
    "name": "Overtime Registration",
    "page_number": "Hide",
    "pdf_generator": "wkhtmltopdf",
    "print_format_builder": 0,
    "print_format_builder_beta": 0,
    "print_format_for": null,
    "print_format_type": "Jinja",
    "raw_commands": null,
    "raw_printing": 0,
    "report": null,
    "show_section_headings": 0,
    "standard": "No"
  }
]