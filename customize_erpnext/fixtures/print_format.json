[
    {
        "absolute_value": 0,
        "align_labels_right": 0,
        "css": "",
        "custom_format": 1,
        "default_print_language": "en",
        "disabled": 0,
        "doc_type": "Stock Entry",
        "docstatus": 0,
        "doctype": "Print Format",
        "font": null,
        "font_size": 14,
        "format_data": "[]",
        "html": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Phiếu Cấp Phát</title>\n    <style>\n        body {\n            font-family: Arial, sans-serif;\n            margin: 2px;\n            font-size: 12px;\n            padding-bottom: 20px;\n            position: relative;\n        }\n        \n        @page {\n            size: A4 portrait;\n            margin: 5mm;\n            -webkit-print-color-adjust: exact;\n            print-color-adjust: exact;\n            @bottom-center {\n                content: \"Page \" counter(page) \" of \" counter(pages) \" | Printed on: {{ frappe.utils.now_datetime().strftime('%d/%m/%Y %H:%M:%S') }}\";\n                font-size: 9px;\n                color: #666;\n                font-family: Arial, sans-serif;\n            }\n        }\n        \n        html, body {\n            width: 210mm;\n            height: 297mm;\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n        \n        .header {\n            margin-bottom: 30px;\n            margin-top: 10px;\n        }\n        \n        .header-table {\n            width: 100%;\n            border-collapse: collapse;\n            margin-bottom: 20px;\n        }\n        \n        .header-table td {\n            border: none;\n            padding: 10px;\n            vertical-align: middle;\n        }\n        \n        .header-left {\n            width: 80px;\n            text-align: left;\n        }\n        \n        .header-center {\n            text-align: center;\n        }\n        \n        .header-center h1 {\n            margin: 5px 0;\n            font-size: 20px;\n            font-weight: bold;\n        }\n        \n        .header-center .japanese {\n            font-size: 14px;\n            margin: 0;\n        }\n        \n        .header-right {\n            width: 80px;\n            text-align: right;\n        }\n        \n        .qr-content {\n            text-align: center;\n        }\n        \n        .qr-number {\n            font-size: 10px;\n            font-weight: bold;\n            margin-top: 2px;\n            white-space: nowrap !important;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            width: 100px;\n            display: inline-block;\n            line-height: 1.2;\n            word-break: keep-all;\n            word-wrap: normal;\n        }\n        \n        .info-table {\n            width: 100%;\n            border-collapse: collapse;\n            margin-bottom: 15px;\n            margin-top: 30px;\n        }\n        \n        .items-table {\n            width: 100%;\n            border-collapse: collapse;\n            margin-bottom: 20px;\n        }\n        \n        .footer-table {\n            width: 100%;\n            border-collapse: collapse;\n            margin-top: 30px;\n            page-break-inside: avoid;\n        }\n        \n        th, td {\n            border: 1px solid #000;\n            padding: 5px;\n            text-align: center;\n            font-size: 11px;\n            vertical-align: middle;\n        }\n        \n        th {\n            background-color: #f0f0f0;\n            font-weight: bold;\n        }\n        \n        .header-cell {\n            line-height: 1.2;\n        }\n        \n        .vietnamese {\n            display: block;\n            font-weight: bold;\n        }\n        \n        .japanese {\n            display: block;\n            font-size: 10px;\n            color: #666;\n        }\n        \n        .text-left {\n            text-align: left;\n        }\n        \n        .empty-row {\n            height: 40px;\n        }\n        \n        @media print {\n            body {\n                margin: 5mm;\n                padding-bottom: 10mm;\n                font-size: 11px;\n                position: relative;\n            }\n            \n            .qr-content img {\n                width: 70px !important;\n                height: 70px !important;\n            }\n            \n            .info-table {\n                margin-top: 35px !important;\n            }\n            \n            .footer-table {\n                page-break-inside: avoid;\n                margin-top: 40px;\n            }\n        }\n        \n\n    </style>\n</head>\n<body>\n    {%- set item_codes = [] -%}\n    {%- for item in doc.items -%}\n        {%- if item.item_code -%}\n            {%- set _ = item_codes.append(item.item_code) -%}\n        {%- endif -%}\n    {%- endfor -%}\n    \n    {%- set attributes_dict = {} -%}\n    {%- if item_codes -%}\n        {%- set attributes_result = frappe.db.sql(\"\"\"\n            SELECT parent, attribute, attribute_value \n            FROM `tabItem Variant Attribute` \n            WHERE parent IN %(item_codes)s \n            AND attribute IN ('Color', 'Size', 'Colour')\n            AND disabled = 0\n        \"\"\", {\"item_codes\": item_codes}, as_dict=True) -%}\n        \n        {%- for attr in attributes_result -%}\n            {%- if attr.parent not in attributes_dict -%}\n                {%- set _ = attributes_dict.update({attr.parent: {}}) -%}\n            {%- endif -%}\n            {%- set _ = attributes_dict[attr.parent].update({attr.attribute: attr.attribute_value}) -%}\n        {%- endfor -%}\n    {%- endif -%}\n\n    <!-- Header Section -->\n    <div class=\"header\">\n        <table class=\"header-table\">\n            <tr>\n                <td class=\"header-left\">\n                    <div style=\"width: 80px; height: 80px;\"></div>\n                </td>\n                <td class=\"header-center\">\n                    <h1>PHIẾU CẤP PHÁT</h1>\n                    <div class=\"japanese\"><h1>払い出し伝票</h1></div>\n                </td>\n                <td class=\"header-right\">\n                    <!-- QR Code with local generation -->\n                    <div class=\"qr-content\">\n                        {% set qr_data = frappe.utils.get_url() + \"/app/stock-entry/\" + doc.name %}\n                        {% set qr_code_base64 = frappe.call(\"customize_erpnext.api.qr_label_print.generate_qr_code_base64\", data=qr_data) %}\n                        <img src=\"data:image/png;base64,{{ qr_code_base64 }}\" \n                             alt=\"QR Code\" style=\"width: 80px; height: 80px;\">\n                        <div class=\"qr-number\">\n                            NO: {{ doc.custom_no }}\n                        </div>\n                    </div>\n                </td>\n            </tr>\n        </table>\n    </div>\n    \n    <!-- Document Info Table -->\n    <table class=\"info-table\">\n        <thead>\n            <tr>\n                <th class=\"header-cell\">\n                    <span class=\"vietnamese\">Ngày kế hoạch</span>\n                    <span class=\"japanese\">払い出し日</span>\n                </th>\n                <th class=\"header-cell\">\n                    <span class=\"vietnamese\">Đơn hàng</span>\n                    <span class=\"japanese\">プラント</span>\n                </th>\n                <th class=\"header-cell\">\n                    <span class=\"vietnamese\">Mã hàng</span>\n                    <span class=\"japanese\">No</span>\n                </th>\n                <th class=\"header-cell\">\n                    <span class=\"vietnamese\">Số lượng</span>\n                    <span class=\"japanese\">数量</span>\n                </th>\n                <th class=\"header-cell\">\n                    <span class=\"vietnamese\">Size</span>\n                    <span class=\"japanese\">サイズ</span>\n                </th>\n                <th class=\"header-cell\">\n                    <span class=\"vietnamese\">Màu</span>\n                    <span class=\"japanese\">カラー</span>\n                </th>\n                <th class=\"header-cell\">\n                    <span class=\"vietnamese\">Ngày xuất hàng</span>\n                    <span class=\"japanese\">納期</span>\n                </th>\n            </tr>\n        </thead>\n        <tbody>\n            <tr>\n                <td>{{ frappe.utils.formatdate(doc.plan_date, \"dd/MM/yyyy\") if doc.plan_date else \"\" }}</td>\n                <td>{{ doc.custom_order_no or \"\" }}</td>\n                <td>{{ doc.custom_fg_style or \"\" }}</td>\n                <td>{{ doc.custom_fg_qty or \"\" }}</td>\n                <td>{{ doc.custom_fg_size or \"\" }}</td>\n                <td>{{ doc.custom_fg_color or \"\" }}</td>\n                <td>{{ frappe.utils.formatdate(doc.posting_date, \"dd/MM/yyyy\") if doc.posting_date else \"\" }}</td>\n            </tr>\n        </tbody>\n    </table>\n\n    <!-- Items Detail Table -->\n    <div style=\"margin-bottom: 10px; font-weight: bold; text-align: center;\">CHI TIẾT 详細</div>\n    \n    <table class=\"items-table\">\n        <thead>\n            <tr>\n                <th style=\"width: 5%;\">STT</th>\n                <th style=\"width: 20%;\">\n                    <span class=\"vietnamese\">Chi tiết BTP/NPL</span>\n                    <span class=\"japanese\">品目分類</span>\n                </th>\n                <th style=\"width: 20%;\">\n                    <span class=\"vietnamese\">ART NPL</span>\n                    <span class=\"japanese\">資材品番</span>\n                </th>\n                <th style=\"width: 10%;\">\n                    <span class=\"vietnamese\">Size</span>\n                    <span class=\"japanese\">サイズ</span>\n                </th>\n                <th style=\"width: 15%;\">\n                    <span class=\"vietnamese\">Màu</span>\n                    <span class=\"japanese\">色</span>\n                </th>\n                <th style=\"width: 10%;\">\n                    <span class=\"vietnamese\">Số lượng</span>\n                    <span class=\"japanese\">数量</span>\n                </th>\n                <th style=\"width: 20%;\">\n                    <span class=\"vietnamese\">Ghi chú</span>\n                    <span class=\"japanese\">備考</span>\n                </th>\n            </tr>\n        </thead>\n        <tbody>\n            {% for item in doc.items %}\n            <tr>\n                <td>{{ loop.index }}</td>\n                <td class=\"text-left\">{{ item.custom_btp_npl or \"\" }}</td>\n                <td class=\"text-left\">{{ item.item_name or \"\" }}</td>\n                <td>\n                    {%- set size_value = \"\" -%}\n                    {%- if item.item_code and item.item_code in attributes_dict -%}\n                        {%- set item_attrs = attributes_dict[item.item_code] -%}\n                        {%- set size_value = item_attrs.get('Size', '') -%}\n                    {%- endif -%}\n                    {{ size_value or item.custom_size or \"\" }}\n                </td>\n                <td>\n                    {%- set color_value = \"\" -%}\n                    {%- if item.item_code and item.item_code in attributes_dict -%}\n                        {%- set item_attrs = attributes_dict[item.item_code] -%}\n                        {%- set color_value = item_attrs.get('Color', item_attrs.get('Colour', '')) -%}\n                    {%- endif -%}\n                    {{ color_value or item.custom_color or \"\" }}\n                </td>\n                <td>{{ item.qty }} {{ item.uom or \"\" }}</td>\n                <td class=\"text-left\">{{ item.custom_remarks or \"\" }}</td>\n            </tr>\n            {% endfor %}\n        </tbody>\n    </table>\n\n    <!-- Footer Signature Table -->\n    <table class=\"footer-table\">\n        <thead>\n            <tr>\n                <th class=\"header-cell\" style=\"width: 25%;\">\n                    <span class=\"vietnamese\">GHI CHÚ</span>\n                    <span class=\"japanese\">備考</span>\n                </th>\n                <th class=\"header-cell\" style=\"width: 25%;\">\n                    <span class=\"vietnamese\">KHO NGUYÊN LIỆU</span>\n                    <span class=\"japanese\">資材管理</span>\n                </th>\n                <th class=\"header-cell\" style=\"width: 25%;\">\n                    <span class=\"vietnamese\">LINE</span>\n                    <span class=\"japanese\">ライン</span>\n                </th>\n                <th class=\"header-cell\" style=\"width: 25%;\">\n                    <span class=\"vietnamese\">QC</span>\n                </th>\n            </tr>\n        </thead>\n        <tbody>\n            <tr class=\"empty-row\">\n                <td>{{ doc.custom_remarks or \"\" }}</td>\n                <td>&nbsp;</td>\n                <td>&nbsp;</td>\n                <td>&nbsp;</td>\n            </tr>\n        </tbody>\n    </table>\n\n\n</body>\n</html>",
        "line_breaks": 0,
        "margin_bottom": 10.0,
        "margin_left": 10.0,
        "margin_right": 10.0,
        "margin_top": 10.0,
        "modified": "2025-07-15 16:44:00.490013",
        "module": "Customize Erpnext",
        "name": "Stock Entry Customize",
        "page_number": "Bottom Right",
        "pdf_generator": "wkhtmltopdf",
        "print_format_builder": 0,
        "print_format_builder_beta": 0,
        "print_format_type": "Jinja",
        "raw_commands": null,
        "raw_printing": 0,
        "show_section_headings": 0,
        "standard": "No"
    }
]